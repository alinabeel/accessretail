{% extends "base.html" %}
{% load static %}
{% block stylesheets %}
{% endblock stylesheets %}
{% load crispy_forms_tags %}
{% block action_buttons %}
<a href="{% url 'reports:cell-summary-ajax' country_code=global.country_code pk=view.kwargs.pk cat=request.GET.category %}?export=csv" class="btn btn-info btn-lg waves-effect waves-light">Export CSV</a>
{% endblock action_buttons %}
{% block content %}

{{ view.kwargs.pk }}
<div class="row">
    <div class="col-12">
        <div class="card m-b-30">
            <div class="card-body">
                <form name="frm1" id="frm1" action="" method="POST">
                    {% csrf_token %}

                    <div class="row">
                        <div class="col-12">
                            <div class="card m-b-30">
                                <div class="card-body">

                                    <table
                                    id="ajax_datatable"
                                    class="datatable table table-striped table-bordered dt-responsive nowrap"
                                    style="border-collapse: collapse; border-spacing: 0; width: 100%;"
                                    url="{% url 'reports:cell-summary-ajax' country_code=global.country_code pk=view.kwargs.pk cat=request.GET.category %}">
                                    </table>

                                </div>
                            </div>
                        </div> <!-- end col -->
                    </div> <!-- end row -->


                </form>




            </div>
        </div>
    </div> <!-- end col -->
</div> <!-- end row -->
{% endblock content %}

{% block javascripts %}
<script type="text/javascript" src="{% static 'ajax_datatable/js/utils.js' %}"></script>
<script>
    $(document).ready(function() {
        let dt_ajax_url = $('#ajax_datatable').attr("url");
        AjaxDatatableViewUtils.initialize_table(
            $('#ajax_datatable'),
            dt_ajax_url,
        );

    });

</script>
{% endblock javascripts %}